(()=>{"use strict";var e,t={199:()=>{const e=window.wp.blocks,t=window.wp.i18n,o=window.wp.element,n=window.wp.components,r=window.wp.blockEditor,i=window.wp.data,a=window.ReactJSXRuntime,l=JSON.parse('{"UU":"replicate/replicate"}');(0,e.registerBlockType)(l.UU,{edit:function({clientId:l}){const[c,s]=(0,o.useState)(""),[p,d]=(0,o.useState)(!1),u=(0,r.useBlockProps)(),{insertBlock:g}=(0,i.useDispatch)(r.store),{getBlockRootClientId:h,getBlockIndex:w}=(0,i.useSelect)((e=>({getBlockRootClientId:e(r.store).getBlockRootClientId,getBlockIndex:e(r.store).getBlockIndex})),[]);return(0,a.jsxs)("div",{...u,children:[(0,a.jsx)(n.Panel,{children:(0,a.jsxs)(n.PanelBody,{title:(0,t.__)("Image Generator","replicate"),initialOpen:!0,children:[(0,a.jsx)(n.TextControl,{label:(0,t.__)("Enter your prompt","replicate"),value:c,onChange:e=>s(e),placeholder:(0,t.__)("Describe the image you want to generate...","replicate"),className:"components-base-control__input"}),(0,a.jsx)(n.Button,{isPrimary:!0,onClick:async()=>{if(c){d(!0);try{const t=await fetch("/wp-json/replicate-api/v1/generate",{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":wpApiSettings.nonce},body:JSON.stringify({input:{prompt:c},model:"stability-ai/sdxl"})}),o=await t.json();if(console.log("Response data:",o),o.output&&o.output[0]){console.log("Image URL:",o.output[0]);const t=h(l),n=w(l,t),r=(0,e.createBlock)("core/image",{url:o.output[0],caption:c,alt:c});console.log("Created block:",r),g(r,n+1,t),s("")}}catch(e){console.error("Error generating image:",e)}finally{d(!1)}}},disabled:p||!c,children:p?(0,t.__)("Generating...","replicate"):(0,t.__)("Generate Image","replicate")})]})}),p&&(0,a.jsxs)("div",{className:"generation-loading",children:[(0,a.jsx)(n.Spinner,{}),(0,a.jsx)("p",{children:(0,t.__)("Generating your image...","replicate")})]})]})},save:function(){return(0,a.jsx)("p",{...r.useBlockProps.save(),children:"Replicate â€“ hello from the saved content!"})}})}},o={};function n(e){var r=o[e];if(void 0!==r)return r.exports;var i=o[e]={exports:{}};return t[e](i,i.exports,n),i.exports}n.m=t,e=[],n.O=(t,o,r,i)=>{if(!o){var a=1/0;for(p=0;p<e.length;p++){for(var[o,r,i]=e[p],l=!0,c=0;c<o.length;c++)(!1&i||a>=i)&&Object.keys(n.O).every((e=>n.O[e](o[c])))?o.splice(c--,1):(l=!1,i<a&&(a=i));if(l){e.splice(p--,1);var s=r();void 0!==s&&(t=s)}}return t}i=i||0;for(var p=e.length;p>0&&e[p-1][2]>i;p--)e[p]=e[p-1];e[p]=[o,r,i]},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={57:0,350:0};n.O.j=t=>0===e[t];var t=(t,o)=>{var r,i,[a,l,c]=o,s=0;if(a.some((t=>0!==e[t]))){for(r in l)n.o(l,r)&&(n.m[r]=l[r]);if(c)var p=c(n)}for(t&&t(o);s<a.length;s++)i=a[s],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(p)},o=globalThis.webpackChunkreplicate=globalThis.webpackChunkreplicate||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var r=n.O(void 0,[350],(()=>n(199)));r=n.O(r)})();